<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Donors List</title>
    <link rel="stylesheet" type="text/css" href="/css/styles.css">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    
</head>
<body class="bg-dark text-light" style="background-image: url('/images/download.jpg'); background-size: cover; background-position: center; background-repeat: no-repeat; background-attachment: fixed;">


<body class="bg-dark text-light">
    <div class="container-fluid min-vh-100 d-flex flex-column justify-content-center align-items-center bg-gradient" style="background: linear-gradient(45deg, #8B0000, #000000);">
        <h1 class="text-center mb-4 text-danger">RedWater Foundation</h1>
        <h2 class="text-center mb-4">Donors List</h2>
        <div class="card bg-dark text-light mb-4 p-3 border-danger">
            <blockquote class="blockquote text-center mb-0">
                <p class="mb-0 text-danger fw-bold">"இரத்தம் கொடுப்பது ஒருவரின் வாழ்க்கையை மாற்றும். அந்த ஒருவர் ஒரு நாள் உங்கள் நெருங்கிய உறவினராகவோ, நண்பராகவோ, அன்புக்குரியவராகவோ - அல்லது நீங்களாகவே கூட இருக்கலாம்."</p>

            </blockquote>
        </div>
            <div class="card bg-dark text-light mb-4 p-3 border-danger">
                <h3 class="text-center mb-3">Search and Filter</h3>
                <div class="row g-3">
                    <div class="col-md-4">
                        <input type="text" id="nameSearch" class="form-control" placeholder="Search by name">
                    </div>
                    <div class="col-md-4">
                        <select id="bloodTypeFilter" class="form-select">
                            <option value="">Select Blood Type</option>
                            <option value="A+">A+</option>
                            <option value="A-">A-</option>
                            <option value="B+">B+</option>
                            <option value="B-">B-</option>
                            <option value="AB+">AB+</option>
                            <option value="AB-">AB-</option>
                            <option value="O+">O+</option>
                            <option value="O-">O-</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <button id="resetFilters" class="btn btn-outline-danger w-100">Reset</button>
                    </div>
                </div>
            </div>

            <script th:inline="javascript">
                document.addEventListener('DOMContentLoaded', function() {
                    const nameSearch = document.getElementById('nameSearch');
                    const bloodTypeFilter = document.getElementById('bloodTypeFilter');
                    const resetFilters = document.getElementById('resetFilters');
                    const table = document.querySelector('table');
                    const rows = table.querySelectorAll('tbody tr');

                    function filterTable() {
                        const nameValue = nameSearch.value.toLowerCase();
                        const bloodTypeValue = bloodTypeFilter.value;

                        rows.forEach(row => {
                            const name = row.cells[1].textContent.toLowerCase();
                            const bloodType = row.cells[2].textContent;
                            const nameMatch = name.includes(nameValue);
                            const bloodTypeMatch = bloodTypeValue === '' || bloodType === bloodTypeValue;

                            row.style.display = nameMatch && bloodTypeMatch ? '' : 'none';
                        });
                    }

                    nameSearch.addEventListener('input', filterTable);
                    bloodTypeFilter.addEventListener('change', filterTable);

                    resetFilters.addEventListener('click', function() {
                        nameSearch.value = '';
                        bloodTypeFilter.value = '';
                        rows.forEach(row => row.style.display = '');
                    });
                });
            </script>
            <table class="table table-dark table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Blood Type</th>
                        <th>Contact Number</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="donor : ${donors}">
                        <td th:text="${donor.id}"></td>
                        <td th:text="${donor.name}"></td>
                        <td th:text="${donor.bloodType}"></td>
                        <td th:text="${donor.contactNumber}"></td>
                    </tr>
                </tbody>
            </table>
            
            <div class="text-center mt-4">
                <a href="/donors/new" class="btn btn-danger">Become a  Donor</a>
            </div>
        </div>
        
        <blockquote class="blockquote text-center mt-4">
            <p class="mb-0">"Donate blood and be the reason for someone's existence."</p>
        </blockquote>
    </div>
</body>
</html>
